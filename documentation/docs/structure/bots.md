---
sidebar_position: 2
---

# Боты

Элемент справочника "Боты" соответствует экземпляру реального бота Telegram. Посредством этого справочника настраивается вариант взаимодействия с ботом, а также определяется список доступных команд бота и сценарий их обработки.

![Бот Telegram в 1С](../img/telegram-bot.png)

На вкладке "Настройки" в обязательном порядке необходимо указать наименование бота и токен, полученный при его [создании](docs\create-bot.md).

Далее необходимо определиться с вариантом взаимодействия между 1С и ботом Telegram - регламентное задание или вебхук.

### Обмен посредством регламентного задания

Если выбрать вариант взаимодействия с ботом через регламентное задание, то для бота будет создано отдельное регламентное задание, которое по заданному расписанию будет обращаться к серверу Telegram, забирать оттуда все полученные ботом новые сообщения, после чего обрабатывать каждое из них в отдельности и отправлять соответствующие ответы. Естественно, если требуется, чтобы отклик от бота на каждое введеное пользователем сообщение был максимально быстрым, то расписание регламентного задания придется выставить с высокой периодичностью.

### Обмен посредством вебхука

В случае обмена через вебхук каждое новое полученное ботом сообщение будет автоматически перенапрвлено на специальный HTTP-сервис 1С, где оно будет обработанно в отдельном порядке. Данный вариант взаимодействия потребует от вас некоторых дополнительных усилий, таких как установка сертификата SSL и доменного имени, а также публикация базы без авторизации.

В форме настройки бота нужно будет ввести полный URL-адрес вебхука, который будет выглядеть следующим образом:

<code>Адрес публикации базы + /hs/telegram-bot-management/webhook/ + Имя бота</code>
.

Например, <code>https://mydomain.ru/1c-basename/hs/telegram-bot-management/webhook/my_bot_name</code>

Дополнительно можно ввести секретный заголовок для вебхука, чтобы удостовериться, что запросы к HTTP-сервису действительно приходят от Telegram, а не из некого стороннего сервиса.

Если все настройки выполнены верно, то после нажатия на кнопку "Установить вебхук" в 1С будет выведено оповещение об успешной установке вебхука. С помощью соответствующих кнопок на форме можно также отключить вебхук или получить информацию об уже подключенном к боту вебхуке.
